# Secure settings
設定によっては機密性が高く、ファイルシステムのパーミッションに頼ってその値を保護するだけでは十分ではありません。このユースケースのために、Elasticsearchはキーストアと、キーストア内の設定を管理するelasticsearch-keystoreツールを提供します。

一部の設定のみキーストアから読み取るように設計されています。しかし、キーストアには、サポートされていない設定をブロックするバリデーションがありません。サポートされていない設定を鍵ストアに追加すると、Elasticsearchの起動に失敗します。ある設定が鍵ストアでサポートされているかどうかを確認するには、設定の参照先に「Secure」修飾子があるかどうかを調べます。

鍵ストアの変更はすべて、Elasticsearchを再起動した後に有効になります。

これらの設定は、elasticsearch.yml設定ファイル内の通常の設定と同様、クラスタ内の各ノードで指定する必要があります。現在、すべてのセキュアな設定はノード固有の設定であり、すべてのノードで同じ値を持つ必要があります。

## Reloadable secure settings
elasticsearch.ymlの設定値と同様に、鍵ストアの内容に対する変更は、稼働中のElasticsearchノードに自動的に適用されません。設定の再読み込みには、ノードの再起動が必要です。しかし、特定のセキュアな設定は再読み込み可能としてマークされています。そのような設定は、実行中のノードで再読み込みして適用することができます。

再読み込み可能かどうかにかかわらず、すべてのセキュア設定の値は、すべてのクラスタノードで同一である必要があります。必要なセキュア設定の変更を行った後、bin/elasticsearch-keystore addコマンドを使用して、呼び出します。

```
POST _nodes/reload_secure_settings
{
  "secure_settings_password": "keystore-password" ---1
}
```

1. Elasticsearchのキーストアが暗号化されるパスワードです。

このAPIは、すべてのクラスターノードで鍵ストア全体の復号化と再読み込みを行いますが、再読み込み可能なセキュア設定のみが適用されます。他の設定の変更は、次の再起動まで有効にはなりません。この呼び出しが戻ると、再読み込みが完了し、これらの設定に依存するすべての内部データ構造が変更されたことになります。あたかも最初から新しい値が設定されていたかのように、すべてが表示されるはずです。

複数の再読み込み可能なセキュア設定を変更する場合は、各クラスタノードですべての設定を変更し、変更後に再読み込みを行うのではなく、reload_secure_settingsを発行してください。

リロード可能なセキュアセッティングは以下の通りです。
- The Azure repository plugin
- The EC2 discovery plugin
- The GCS repository plugin
- The S3 repository plugin
- Monitoring settings
- Watcher settings
